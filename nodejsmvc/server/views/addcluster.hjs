<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="language" content="en" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<link rel="stylesheet" type="text/css" href="../stylesheets/screen.css" media="screen, projection" />
	<link rel="stylesheet" type="text/css" href="../stylesheets/print.css" media="print" />
        <link rel="stylesheet" type="text/css" href="../stylesheets/cloud.css" media="screen, projection" />
	<link rel="stylesheet" type="text/css" href="../stylesheets/tooltip.css" media="screen, projection" />
	<link rel="stylesheet" type="text/css" href="../stylesheets/main.css" />
	<link rel="stylesheet" type="text/css" href="../stylesheets/form.css" />
        <link rel="stylesheet" type="text/css" href="../stylesheets/jqueryslidemenu.css" />
        <link media="screen" rel="stylesheet" href="../stylesheets/simplemodal/basic/css/demo.css" type="text/css">
        <link media="screen" rel="stylesheet" href="../stylesheets/simplemodal/basic/css/basic.css" type="text/css">
        <link rel="stylesheet" type="text/css" href="../stylesheets/jquery.confirm.css" />
        <link rel="stylesheet" type="text/css" href="../stylesheets/pure-min.css" />
        <script type="text/javascript" src="../javascripts/jquery.js"></script>
	<script type="text/javascript" src="../javascripts/tablesorter/jquery-latest.js"></script>
        <script type="text/javascript" src="../javascripts/jqueryslidemenu.js"></script> 
        <script type="text/javascript" src="../javascripts/simplemodal/basic/js/basic.js"></script>
        <script type="text/javascript" src="../javascripts/simplemodal/basic/js/jquery.simplemodal.js"></script>
	<link rel="stylesheet" type="text/css" href="../javascripts/tablesorter/blue/style.css" />

	<title>List Clusters </title>
</head>

<body>

<div class="container main_wrapper" id="page">


        <div class="row_6">
                <div class="company_logo">
                        <img class="image" src="../images/logo.png" height="64" width="39">
                        <h2>
                                <span style="font-weight: normal;" class="span">IT Cloud Physical&nbsp;</span>
                        </h2>
                </div>
                <p>
                        <span style="font-family: Tahoma, Geneva, sans-serif; position: relative; top: 10px; " class="span5">
                                <span style="color: rgb(245, 240, 245); font-size: 23px; line-height: 23px;top:-5px;left:20px;position:relative; "> Cluster Service</span>
                        </span>
                </p>
                <p style="position:relative;text-align:right;color:#fff;font-family: Tahoma, Geneva, sans-serif;margin-right:10px;">Welcome, EMAIL_OF_USER
                   {{firstname}}&nbsp;{{lastname}}
		</p>
        </div>

	<div id="myslidemenu" class=" jqueryslidemenu" style='width: 100%'>
<ul>
	        <li><a href="/clusterslist/">My Clusters</a></li>
  		       <!-- <ul>
  		            <li><a href="#">Link</a></li>
  			        <li><a href="#">Link</a></li>
  			        <li><a href="#">Link</a></li>
  		        </ul>
                     </li>-->
                <li><a href="#">Documentation</a></li>
                <li><a href="#">Support</a></li>
	</div><!-- mainmenu -->
        <div class='content'>
<style type="text/css">
    .tbclass td{
	padding-left: 10px !important;
    }
    .checkBoxClass{float: left;overflow:auto}
    div.row label{width: 262px !important;overflow:auto}
    div.row span label{width: 67px !important;overflow:auto}
    #root span label{width: 30px !important;overflow:auto}
    .clsClass{margin-left: 288px; overflow:hidden;}
    #confirmBox{width: 461px !important;overflow:auto}
    #confirmBox p{ padding-top: 0px !important; overflow:auto}
    #confirmButtons{ padding-top: 0px !important;overflow:auto}
</style>

    <div style="margin-top:20px;margin-left: 13px;color:#FFF;font-size:1.8em;width: 95%;padding:10px;background-image:linear-gradient(to bottom, #756C75 88%, #756C75 97%)">Create Cluster</div>
        <div id='processing' style='display: none;margin-top: 100px; margin-left: 25%;'><p style='color: red; margin-left: -10px; margin-top: -50px;'>This action may take more than 15 seconds as the cluster is prepared. The status of the cluster will reflect whether it is ready.</p><img id="spinner" src="../images/processing.gif" style='margin-left: 85px;'></div>
    <div class="form" style='width:80%;margin: 40px;'>
	<div id="msgBox" class="" style="display:none; width: 700px; margin-bottom: 15px;">
           <div id="message" class='error' style="margin-left: -20px; width: 126%; border: 2px solid; padding: 5px 0 5px 5px;"></div>
           <div style="clear:both"></div>
       </div>
<form id="addcluster-form" class="pure-form pure-form-aligned" action="/clusteradd/" method="post">
    <fieldset>
        <div class="pure-control-group">
            <label for="name">Name</label>
            <input id="name" type="text" name="name" style="width:258px;">
        </div>

        <div class="pure-control-group">
            <label for="totalCpu">Total Cpu</label>
            <input id="totalCpu" name="totalCpu" type="text" placeholder="4" style="width:258px;" >
            <span style='vertical-align: top;'><a class="tooltip" href="#" style='margin-left: 6px;'>
                        <img style="vertical-align: middle;margin-bottom: 2px;" src="../images/icon-tooltip.png"/>
                        <span class="custom help">
                            <img class="testing" src="../images/Help.png" alt="help" height="48" width="48" />
                            Please use only lowercase alphabets and numbers only_
                       </span>
            </a></span>
        </div>

        <div class="pure-control-group">
            <label for="memorySize">Memory Size</label>
            <input id="memorySize" name="memorySize" type="text" placeholder="8"  style="width:258px;" >
<span style='vertical-align: top;'><a class="tooltip" href="#" style='margin-left: 6px;'><img style="vertical-align: middle;margin-bottom: 2px;" src="../images/icon-tooltip.png"/><span class="custom help"><img class="testing" src="../images/Help.png" alt="help" height="48" width="48" />Size of RAM</span></a></span>
        </div>
<!--
        <div class="pure-control-group">
            <label for="storageSize">Storage Size</label>
            <input id="storageSize" name="storageSize" type="text" placeholder="80"  style="width:258px;" >
<span style='vertical-align: top;'><a class="tooltip" href="#" style='margin-left: 6px;'><img style="vertical-align: middle;margin-bottom: 2px;" src="../images/icon-tooltip.png"/><span class="custom help"><img class="testing" src="../images/Help.png" alt="help" height="48" width="48" />Size of RAM</span></a></span>
        </div>
-->
        <div class="pure-control-group">
            <label for="landscape">Environment</label>
            <select style="width:263px;" class="actionServer" name="landscape" id="landscape">
                    <option name="landscape" value="" selected="selected">Select Environment</option>
                    <option name="landscape" value="dev">Dev</option>
                    <option name="landscape" value="stage">Stage</option>
                    <option name="landscape" value="prod">Prod</option>
            </select>
        </div>
        <div class="pure-control-group">
            <label for="sshKey">SSH Public Key</label>
<textarea style="background: none repeat scroll 0 0 #e8e8e8; padding: 10px 15px; margin: 2px;width:358px;" maxlength="999" name="sshKey" id="sshKey">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDQCuxs3c+R3XWG30hde3cnUsgG0VQvB9RAEqZv7SQ/LKSjkruys1eejwbIZ3IPpi23NzOGc3Lw1Mv6eqkOkT4F0svb0JpnnDQBpvNHKJLDossvILQgFhPD1ZMfxP805xfH++Top039YGvBSi5ZQ8Cxo5CEPeS72nsoRr7nn2zg8FXmtZ0/IT5Z7ud+sfSc+XNau1cSgSNLR1FSg3pcH1YEf1wHAloFfKLTNrK0Km8xhwX91eWJyHuYhDQAndaEUFCr3/xpCuVPnftWrkxW7kQlEeVyUWC0LH/StbY+MHDity0zYgCnXrqowt0hY4UU8jLrzNMocI7fiDalik6vz5Pp root@itc-compute-dev-8</textarea>
        </div>
    <div class="form row buttons" style="margin: 10px 0px; width: 110px; min-height: 32px;">
        <input type="submit" id="addcluster" class='' name="yt1" value="Add Cluster" style='background-color: #7a0d0d;color: #fff; border-radius: 5px;padding: 5px; align:center; width: 130px;'>
    </div>
<!--
        <div class="row buttons" style='width: auto;margin-left: 290px;margin-top: 30px;'>
            <button id="addCluster" type="submit" class="pure-button pure-button-primary" style="align: center;width:128px;">Submit</button>
        </div>
-->
    </fieldset>
</form>
        
    </div><!-- form -->
<script type='text/javascript'>

function setMemorySize(){
       var totalCpu = $('#totalCpu').val();
       var totalCpuVal = parseInt(totalCpu);
       if (totalCpuVal > 0){
            memorySizeVal = parseInt(totalCpuVal * 2);
            $('#memorySize').val(memorySizeVal.toString());
            $('#memorySize').disabled = true;
       }
}
function setTotalCpu(){
       var memorySize = $('#memorySize').val();
       var memorySizeVal = parseInt(memorySize);
       if (memorySizeVal > 0){
            totalCpuVal = parseInt(memorySizeVal / 2);
            $('#totalCpu').val(totalCpuVal.toString());
            $('#totalCpu').disabled = true;
       }
}


$(document).ready(function () {
    $("#processing").hide();
    $("#spinner").hide(); 
});


$("#addCluster").click(function() {
    $("#processing").show();
    $("#spinner").show();	
	var name = validateData('name', 'Name');
	if(name === null){
    $("#processing").hide();
    $("#spinner").hide();
        return false;}
	
	var regexpNum = /^[0-9]+$/;
        var totalCpu = validateData('totalCpu', 'Total Cpu');
        if (totalCpu.search(regexpNum) == -1)
        {
                $('#message').html('Invalid total CPU !! only numeric value allowed!!');
                $('#msgBox').show();
    $("#processing").hide();
    $("#spinner").hide();
                return false;
        }
        var storageSize = validateData('storageSize', 'Storage Size');
        if (storageSize.search(regexpNum) == -1)
        {
                $('#message').html('Invalid storage size !! only numeric value allowed!!');
                $('#msgBox').show();
    $("#processing").hide();
    $("#spinner").hide();
                return false;
        }
        var memorySize = validateData('memorySize', 'Memory Size');
        if (memorySize.search(regexpNum) == -1)
        {
                $('#message').html('Invalid memory size !! only numeric value allowed!!');
                $('#msgBox').show();
    $("#processing").hide();
    $("#spinner").hide();
                return false;
        }
       var totalCpuVal = parseInt(totalCpu);
       var memorySizeVal = parseInt(memorySize);
       var storageSize = parseInt(storageSize);
       if (memorySizeVal > totalCpuVal * 2 || memorySizeVal < totalCpuVal * 2 || totalCpuVal < 4)
        {
                if (memorySizeVal > totalCpuVal * 2) { $('totalCpu').val(memorySizeVal/2);}
                $('#message').html('Invalid total cpu and Memory size specification !! Specify 2 GB for every 1 cpu and minimum 4 cpu!!');
                $('#msgBox').show();
                $("#processing").hide();
                $("#spinner").hide();
                return false;
        }

       if (storageSize < 80 )
        {
                $('#message').html('Invalid Storage size specification !! Specify 80GB minimum!!');
                $('#msgBox').show();
                $("#processing").hide();
                $("#spinner").hide();
                return false;
        }
        
	var data = $("#addcluster-form").serialize();
var formId = 'addcluster-form';
var onSuccess = function(){
    $("#processing").hide();
    $("#spinner").hide();
                        window.location.href = '/clusterslist/';
                }
var url = '/clusteradd/';

    $('#message').html("");
    $('#msgBox').hide();
    $("#"+formId).hide();
    $("#processing").show();
    $("#spinner").show();
    //alert("Please wait while we process your data. This may take some time.");
    $.ajax({
        url: url,
        data: data,
        dataType: 'json',
        async: true,
        type: "POST",
        timeout: 128000,
        beforeSend: function(jqXHR, settings) {
               $("#processing").show();
               $("#spinner").show();
                    },
        success: function(data, status, jqXHR) {
            $('#message').html("");
            $('#message').html(data.success ? data.successMessage : data.errorMessage);
           if (onSuccess) {
		$("#processing").hide();
               if(!data.success)
                    $("#"+formId).show();
               $('#message').attr('class', data.success ? 'success' : 'error');
           }
           else {
	       $("#processing").hide();
               $("#"+formId).show();
               $('#message').attr('class','');
           }
           $("#processing").hide();
           $("#spinner").hide();
           $('#msgBox').show();
           if (data.success && onSuccess) onSuccess();
        },
        error: function(data) {
            $("#processing").hide();
            $("#spinner").hide();
            $('#message').html(data.errorMessage);
            $('#message').attr('class', 'error');
            $('#msgBox').show();
            $("#"+formId).show();
            window.location.href = '/clusterslist/';
        },
       done: function( data, textStatus, jqXHR ) {
            $("#processing").hide();
            $("#spinner").hide();
            window.location.href = '/clusterslist/';
       },
       complete : function (){
            $("#processing").hide();
            $("#spinner").hide();
            window.location.href = '/clusterslist/';
            },
      });
   $("#processing").show();
   $("#spinner").show();
   setTimeout(function() { 
   $("#processing").hide();
   $("#spinner").hide();
return false; }, 120000);
	return false;
});


</script>
        </div>
        <div class="clear"></div>
        <div class="copyright">
                <i class="paragraph2">
                     <span style="font-family: 'Trebuchet MS', sans-serif; " class="span6">© 2014 All Rights Reserved. </span>
                     <span class="privacy_policy privacy_policyspanCopy">
                         <span style="font-family: 'Trebuchet MS', sans-serif;">Privacy Policy.</span>
                     </span>
                </i>
        </div>
</div><!-- page -->
<script type='text/javascript'>
        $("#outer").click(function(){
                var option = $("#outer").val();
                if(option == 'advanced')
                        window.location.href = '/?p=advanced';
                else if(option == 'public')
                        window.location.href = '/amp';
        });
</script>
</body>
<script src="//code.jquery.com/jquery-1.11.2.js"></script>
 <script src="../javascripts/bootbox.min.js"></script>
 <script src="../javascripts/jquery.confirm.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../javascripts/simplemodal/basic/js/jquery.simplemodal.js"></script>
<script type="text/javascript" src="../javascripts/simplemodal/basic/js/basic.js"></script>
<script type="text/javascript" src="../javascripts/piechart.js"></script>
<!--<script src="//code.jquery.com/jquery-1.11.2.js"></script>
 <script src="../javascripts/bootbox.min.js"></script>
 <script src="../javascripts/jquery.confirm.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>-->
<script type="text/javascript" src="../javascripts/piechart.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
</html>
        
